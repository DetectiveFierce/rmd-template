% commands.tex

% Custom environments
\newenvironment{answer}{
  \begin{list}{}{
    \setlength{\leftmargin}{2cm}
    \setlength{\rightmargin}{0cm}
    \setlength{\listparindent}{0cm}
    \setlength{\itemindent}{0cm}
    \setlength{\parsep}{0pt}
  }
  \item[]
}{
  \end{list}
}

% Simple metadata commands
\newcommand{\mytitle}{TITLE PLACEHOLDER}
\newcommand{\myauthor}{AUTHOR PLACEHOLDER}

% TikZ helpers
\newcommand{\tikzmark}[1]{\tikz[remember picture, baseline] \node (#1) {};}

% Math box
\newcommand{\mathbox}[2]{%
  \begingroup
  \setlength{\fboxsep}{4pt}
  \setlength{\fboxrule}{1.2pt}
  \color{#1}
  \fbox{\color{black} $\displaystyle #2$}
  \endgroup
}

% Small utilities
\newcommand{\dash}{-\mkern-8mu-}
\newcommand*{\underuparrow}[1]{\ensuremath{\underset{\uparrow}{#1}}}

% Fake bold utilities
\newcommand{\fbseries}{\unskip\setBold\aftergroup\unsetBold\aftergroup\ignorespaces}
\makeatletter
\newcommand{\setBoldness}[1]{\def\fake@bold{#1}}
\makeatother
\newcommand{\highlight}[1]{%
    \textcolor{textgreen}{\fbseries #1}\xspace%
}

% Custom glyphs/shapes
\newcommand{\elbowarrow}{%
  \tikz[baseline=-0.5ex, x=0.4ex, y=0.4ex, line width=0.4pt, line join=round]{
    \def\shaftlen{3}
    \draw
      (-0.25,0) -- (-0.25,\shaftlen) -- (1,\shaftlen)
      -- (1,1) -- (\shaftlen,1)
      -- (\shaftlen,1.75) -- ({\shaftlen + 1.5},0.5) -- (\shaftlen,-0.75) -- (\shaftlen,0)
      -- (1,0) -- cycle;
  }%
}
\newcommand{\tallbar}{\makebox[0pt][r]{\raisebox{-2em}[0pt][0pt]{\rule{0.5pt}{3.3em}}}}

% Column types
\newcolumntype{N}{|>{\raggedleft\arraybackslash}p{1.5em}}     % Step number
\newcolumntype{S}{|>{\raggedright\arraybackslash}p{0.45\textwidth}} % Statement
\newcolumntype{J}{|>{\raggedright\arraybackslash}p{0.45\textwidth}|} % Justification
\newcolumntype{C}{|>{\raggedright\arraybackslash}p{0.45\textwidth}|}  % Conclusion

% Therefore bullets
\newcommand{\btherefore}{\raisebox{-0.65ex}{\(\bullet\)}\kern-0.13ex \raisebox{0.65ex}{\(\bullet\)}\kern-0.13ex \raisebox{-0.65ex}{\(\bullet\)}\kern-0.1em}



% Equation and proof environments
\NewEnviron{UNequation}{
  \vspace{1ex}
  \refstepcounter{eqwithin}
  \begin{equation}
    \tag{\theeqwithin}
    \scalebox{1.25}[1.25]{\ensuremath{\displaystyle \BODY}}
  \end{equation}
  \vspace{1ex}
}

\NewDocumentEnvironment{proofline}{O{0.5ex} O{} }{%
  \begin{list}{}{%
    \setlength{\rightmargin}{0pt}%
  }%
  \item
  \tcolorbox[
    blanker, breakable,
    enforce breakable,
    before skip=3ex,
    after skip=3ex,
    left=4mm, right=0mm, top=1mm, bottom=1mm,
    before upper=\indent,
    parbox=false,
    overlay unbroken={%
      \draw[black, line width=1pt]
        ([xshift=#1,yshift=-1.5ex]frame.south west) --
        ([xshift=#1,yshift=-0.5ex]frame.north west);
      \ifx\empty#2\empty\else
        \node[inner sep=0.75ex, outer sep=0pt, fill=white]
          at ([xshift=#1, yshift=-1.5ex]frame.north west) {\textbf{#2}};
      \fi
    },
    overlay first={%
      \draw[black, line width=1pt]
        ([xshift=#1,yshift=1.5ex]frame.south west) --
        ([xshift=#1,yshift=-0.5ex]frame.north west);
      \ifx\empty#2\empty\else
        \node[inner sep=0.75ex, outer sep=0pt, fill=white]
          at ([xshift=#1, yshift=-1.5ex]frame.north west) {\textbf{#2}};
      \fi
    },
    overlay middle and last={%
      \draw[black, line width=1pt]
        ([xshift=#1,yshift=-1.5ex]frame.south west) --
        ([xshift=#1,yshift=3mm]frame.north west);
    }
  ]%
}{%
  \endtcolorbox
  \end{list}%
}

% Length helpers
\newlength{\imagewidth}
\newlength{\imageheight}

% Circled labels and enumitem setup
\newcommand*\circled[1]{%
  \tikz[baseline=(char.base)]{
    \node[shape=circle,draw,inner sep=1pt] (char) {#1};}}
\setlist[enumerate,1]{label=\protect\circled{\alph*}}